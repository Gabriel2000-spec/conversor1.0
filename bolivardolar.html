<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Reproductor estilo Windows XP</title>
<style>
  /* Reset y estilos básicos */
  body, html {
    height: 100%;
    margin: 0;
    font-family: Tahoma, Geneva, Verdana, sans-serif;
    background: #008080; /* Fondo típico Windows XP */
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
  }

  /* Contenedor principal */
  #app {
    width: 90vw;
    max-width: 600px;
    background: #c0c0c0;
    border: 2px solid #000080;
    box-shadow: 4px 4px 0 #fff, 8px 8px 0 #000080;
    padding: 10px;
    box-sizing: border-box;
    display: none; /* Oculto al inicio (se muestra tras carga) */
    flex-direction: column;
  }

  /* Barra de título estilo Windows XP */
  #titleBar {
    background: linear-gradient(to bottom, #000080, #0000cd);
    color: white;
    font-weight: bold;
    padding: 5px;
    user-select: none;
    border: 1px solid #000040;
  }

  /* Reproductor y controles */
  #playerContainer {
    background: #000;
    margin-top: 10px;
    position: relative;
  }
  iframe {
    width: 100%;
    height: 315px;
    border: none;
  }

  /* Controles estilo Windows XP */
  #controls {
    margin-top: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  button {
    font-family: Tahoma, Geneva, Verdana, sans-serif;
    font-size: 14px;
    padding: 5px 8px;
    margin: 0 3px;
    background: #c0c0c0;
    border: 2px outset #fff;
    cursor: pointer;
    user-select: none;
    box-shadow: 1px 1px 0 #fff inset, -1px -1px 0 #404040 inset;
  }
  button:active {
    border-style: inset;
    box-shadow: none;
  }

  /* Input para nombre de video */
  #videoName {
    margin-top: 12px;
    width: 100%;
    font-size: 14px;
    padding: 5px;
    border: 2px inset #fff;
    background: #e0e0e0;
    color: #000080;
    user-select: text;
  }

  /* Selector de color */
  #colorPicker {
    margin-left: 10px;
    padding: 0;
    width: 30px;
    height: 30px;
    border: 2px inset #fff;
    cursor: pointer;
  }

  /* Barra de carga centrada */
  #loadingScreen {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    font-family: Tahoma, Geneva, Verdana, sans-serif;
    color: #000080;
  }
  #loadingBar {
    width: 300px;
    height: 20px;
    border: 2px solid #000080;
    background: #c0c0c0;
    box-shadow: inset 1px 1px 0 #fff;
    margin: 0 auto 10px auto;
    position: relative;
  }
  #loadingProgress {
    height: 100%;
    background: #000080;
    width: 0%;
    transition: width 0.3s;
  }

  /* Responsive para móvil */
  @media(max-width: 480px){
    iframe {
      height: 200px;
    }
    #app {
      max-width: 100vw;
      height: 100vh;
      box-shadow: none;
      border: none;
      padding: 5px;
    }
    #controls {
      flex-wrap: wrap;
    }
    button {
      flex: 1 1 40%;
      margin: 4px 2px;
      font-size: 12px;
    }
    #videoName {
      font-size: 12px;
    }
  }
</style>
</head>
<body>

<!-- Pantalla de carga -->
<div id="loadingScreen" aria-live="polite" aria-busy="true">
  <div id="loadingBar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
    <div id="loadingProgress"></div>
  </div>
  <div>Cargando...</div>
</div>

<!-- Aplicación -->
<div id="app" role="main" aria-label="Reproductor de video estilo Windows XP">

  <div id="titleBar" aria-label="Barra de título"><Center>Reproductor clásico</div>

  <div id="playerContainer" aria-label="Contenedor del video">
   
   
   
   
   
    
    <iframe width="360" height="202" src="https://www.youtube.com/embed/LfYRFOCesas" title="EL Chapulín Colorado: Duendecitos" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
    
    
    
  </div>

  <div id="controls" aria-label="Controles del reproductor">
    <button id="backBtn" aria-label="Retroceder 10 segundos" title="Retroceder 10 segundos">&laquo; Retroceder</button>
    <button id="forwardBtn" aria-label="Adelantar 10 segundos" title="Adelantar 10 segundos">Adelantar &raquo;</button>
    <label for="volumeRange" style="margin-left:10px;">Volumen:</label>
    <input type="range" id="volumeRange" min="0" max="100" step="1" aria-valuemin="0" aria-valuemax="100" aria-label="Control de volumen" style="width: 100px" />
 <button id="downloadBtn" aria-label="Descargar video" title="Descargar video">Descargar</button>
    <input type="color" id="colorPicker" aria-label="Selector de color de fondo" title="Cambiar color de fondo" />
  </div>

  <input type="text" id="videoName" aria-label="Nombre del video" readonly value="El chapulín colorado (Duendecitos)" />

<p>
   Disfruta de videos, Reproductor de prueba en la aplicación.
</p>
</div>

<script>
  // Variables para almacenar referencias
  const loadingScreen = document.getElementById('loadingScreen');
  const loadingProgress = document.getElementById('loadingProgress');
  const app = document.getElementById('app');
  const videoPlayer = document.getElementById('videoPlayer');
  const backBtn = document.getElementById('backBtn');
  const forwardBtn = document.getElementById('forwardBtn');
  const volumeRange = document.getElementById('volumeRange');
  const downloadBtn = document.getElementById('downloadBtn');
  const colorPicker = document.getElementById('colorPicker');
  const videoNameInput = document.getElementById('videoName');

  // Nota importante:
  // Debido a restricciones de YouTube, el iframe no permite controlar el volumen ni el tiempo directamente sin usar la API de YouTube.
  // Para simplificar esta demo, la funcionalidad de adelantar/retroceder y volumen manipula el iframe con postMessage usando la API de YouTube.
  // Si deseas cambiar el video, modifica el src del iframe y el valor del input videoName en el código fuente directamente.

  // Cargar la API de YouTube para iframe control
  let player;

  function onYouTubeIframeAPIReady() {
    player = new YT.Player('videoPlayer', {
      events: {
        'onReady': onPlayerReady,
      }
    });
  }

  // Mostrar barra carga y simular carga
  function simulateLoading() {
    let progress = 0;
    const interval = setInterval(() => {
      progress += 10;
      loadingProgress.style.width = progress + '%';
      loadingProgress.setAttribute('aria-valuenow', progress);
      if (progress >= 100) {
        clearInterval(interval);
        loadingScreen.style.display = 'none';
        app.style.display = 'flex';
        // Aplicar color guardado
        const savedColor = localStorage.getItem('bgColor');
        if(savedColor) {
          app.style.background = savedColor;
          colorPicker.value = rgbToHex(savedColor);
        } else {
          colorPicker.value = '#c0c0c0';
        }
        // Aplicar volumen guardado
        const savedVolume = localStorage.getItem('volume');
        if(savedVolume !== null) {
          volumeRange.value = savedVolume;
          setVolume(savedVolume);
        } else {
          volumeRange.value = 50;
          setVolume(50);
        }
      }
    }, 300);
  }

  // Ayuda para convertir rgb a hex (para el colorPicker)
  function rgbToHex(rgb) {
    const result = rgb.match(/\d+/g);
    if (!result) return '#c0c0c0';
    return '#' + result.map(x => {
      const hex = parseInt(x).toString(16);
      return hex.length === 1 ? '0' + hex : hex;
    }).join('');
  }

  // Función para cambiar volumen (en iframe con API YouTube)
  function setVolume(vol) {
    if(player && player.setVolume) {
      player.setVolume(vol);
    }
  }

  // Adelantar y retroceder 10 segundos
  function seekBy(seconds) {
    if(player && player.getCurrentTime && player.seekTo) {
      const current = player.getCurrentTime();
      player.seekTo(current + seconds, true);
    }
  }

  // Descargar video: como Youtube no permite descargar, aquí se abre el enlace en otra pestaña para "descargar" (usuario debe usar herramientas externas)
  function downloadVideo() {
    // Obtiene video ID del iframe src
    const src = videoPlayer.getAttribute('src');
    const videoIdMatch = src.match(/embed\/([^?&]+)/);
    let videoId = videoIdMatch ? videoIdMatch[1] : null;
    if(videoId) {
      // Abrir enlace al video normal de YouTube para descargar con herramientas externas
      const url = `https://www.youtube.com/watch?v=${videoId}`;
      window.open(url, '_blank');
    } else {
      alert('No se pudo obtener el ID del video para descargar.');
    }
  }

  // Cambio color fondo app
  colorPicker.addEventListener('input', e => {
    const color = e.target.value;
    app.style.background = color;
    localStorage.setItem('bgColor', color);
  });

  // Control volumen
  volumeRange.addEventListener('input', e => {
    const vol = parseInt(e.target.value, 10);
    setVolume(vol);
    localStorage.setItem('volume', vol);
  });

  // Botones adelantar y retroceder
  backBtn.addEventListener('click', () => {
    seekBy(-10);
  });
  forwardBtn.addEventListener('click', () => {
    seekBy(10);
  });

  // Botón descargar
  downloadBtn.addEventListener('click', () => {
    downloadVideo();
  });

  // Carga la API de YouTube y luego simula carga
  function loadYouTubeAPI() {
    const tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.body.appendChild(tag);
  }

  // Cuando la API está lista, asigna player y comienza simulación carga
  window.onYouTubeIframeAPIReady = function() {
    player = new YT.Player('videoPlayer', {
      events: {
        'onReady': function(event) {
          // Aplica volumen guardado
          const savedVolume = localStorage.getItem('volume');
          if(savedVolume !== null) {
            player.setVolume(savedVolume);
            volumeRange.value = savedVolume;
          } else {
            player.setVolume(50);
            volumeRange.value = 50;
          }
        }
      }
    });
    simulateLoading();
  };

  // Iniciar carga al cargar DOM
  document.addEventListener('DOMContentLoaded', () => {
    loadYouTubeAPI();
  });
</script>
</body>
</html>
